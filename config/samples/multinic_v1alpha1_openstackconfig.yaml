apiVersion: multinic.example.com/v1alpha1
kind: OpenstackConfig
metadata:
  labels:
    app.kubernetes.io/name: multinic-operator
    app.kubernetes.io/managed-by: kustomize
  name: openstackconfig-sample
spec:
  # subnetID가 우선이며, 없으면 subnetName을 사용합니다.
  subnetID: "subnet-uuid"
  # subnetName은 OpenStack 서브넷 이름입니다.
  subnetName: "test"
  vmNames:
    # vmNames에는 VM 이름이 아니라 VM ID(UUID)를 넣습니다.
    - "vm-uuid-1"
    - "vm-uuid-2"
    - "vm-uuid-3"
  credentials:
    # Contrabass provider ID
    openstackProviderID: "provider-uuid"
    # (선택) downstream 라우팅용 k8s provider ID
    k8sProviderID: "k8s-provider-uuid"
    # OpenStack project ID
    projectID: "project-uuid"
  settings:
    # Contrabass/Viola endpoint는 CR에서 지정 (Helm 없이도 동작)
    contrabassEndpoint: "https://expert.bf.okestro.cloud"
    # 필요 시 override (기본값은 자동 선택)
    openstackEndpointInterface: "public"
  secrets:
    # Contrabass 암호화 키는 Secret 참조 권장
    contrabassEncryptKeySecretRef:
      name: contrabass-encrypt-key
      key: CONTRABASS_ENCRYPT_KEY
